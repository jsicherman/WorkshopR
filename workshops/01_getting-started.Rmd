---
output:
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Workshop 1: Welcome to R!

Thanks for tuning into the first installment of the CBH's R workshops! These weekly meetings will aim to teach the fundamentals of R through examples and applications. No prior experience in R (or any programming language, for that matter) is expected.

## Who

Jordan Sicherman, MSc. candidate in bioinformatics under the supervision of Dr. Paul Pavlidis (MSL).

## What

Weekly workshops to learn the fundamentals of R needed to load, manipulate, and visualize your data. Exact focus will depend on group interests, but a proposed syllabus is as follows:

**Week 1:** Setting up, data types and help\
**Week 2:** Data loading, cleaning and pre-processing\
**Week 3:** Control flow (if-else, loops, pipes, etc.)\
**Week 4:** Writing functions and packages\
**Week 5:** Making beautiful visualizations using {ggplot2}\
**Week 6:** Object-oriented R: S3, R6, S4\
**Week 7:** Developing interactive web apps using {Shiny}\
**Week 8:** Handling big data\
**Week 9:** Performing differential expression analysis using {limma}-voom/{DESeq2}\
**Week 10:** Dimensionality reduction 4 ways\
**Week 11:** Statistical analysis: sampling, bootstrapping, hypothesis testing, etc.

## Where

Zoom (join link [here](https://ubc.zoom.us/j/63396313589?pwd=TVVKREhacVlxTFNjd3JFN2ozNEx1Zz09)). You can add [this](https://ubc.zoom.us/meeting/u5cufu-rrzgvEt0ys0SHUYtAi2o9gGYZDaNG/ics?icsToken=98tyKu-rrTIsGdWWtRGOR_MqA4r4M-nzmHZYj7cNhQy1MAhmWxfXP7BNa7VYKeL0) to your calendar to keep track of the meeting schedule.

## When

Fridays from 2:00 - 3:00 PST.

## Why

By the end of these workshops, you will gain the skills required to perform most basic data analysis in R, author (good) packages, benchmark/optimize your code and effectively self-learn future material.

Why should you choose R instead of other programming languages? R is known to be somewhat quirky and is not the fastest language out there, but it has a large community of data analysts and thus a huge selection of packages for easing your own analysis.

## What else

I strongly recommend checking out these resources to supplement your learnings in R.

[Advanced R](https://adv-r.hadley.nz/) by Hadley Wickham, which provides (in my opinion) the best and simplest explanations to the many intricacies of R.

[R for Data Science](https://r4ds.had.co.nz/) by Hadley Wickham and others, which provides a similarly excellent overview of using R for problems in data science.

# Today: Getting our bearings

We'll be focusing on running code in RStudio for these workshops. I'm using *v1.4.953-2 (preview)* which can be downloaded from [here](https://rstudio.com/products/rstudio/download/preview/). I strongly recommend this version as it introduces a visual markdown editor which makes it easy to see these notes while you write your scripts. You'll also need to download R, which is available on CRAN ([here](https://cran.r-project.org/)).

[![](data/rstudio.jpg "RStudio Window"){width="640"}](https://rstudio.com/products/rstudio/download/preview/)

Of course, there are many ways to run R code including via. a Jupyter notebook, or directly from the command line (via. the command `R`). If you have a CWL, you can use the Jupyter instance that Compute Canada provides at [syzygy](https://ubc.syzygy.ca/).

When you're writing code, most work will be done in an R markdown file (.Rmd) or an R script (.R), but it's easy and fast to test things in the console, which can be navigated as you'd expect (up/down arrows). We'll spend some time getting familiar with RStudio to maximize your efficiency while minimizing your overhead. At the end of the day, your choice of IDE, layout, keybinds and etc. are your personal preference, but I'll show you what works for me and maybe it'll work for you too!

I'll make these notebooks available in a GitHub, available [here](https://github.com/jsicherman/WorkshopR). I will write these and update the repository as the weeks progress and I highly recommend you clone the repository to your R setup. This can be accomplished by cloning the repository once (`git clone https://github.com/jsicherman/WorkshopR.git`) and then updating it before each week's workshop by running `git pull`.

## A quick introduction to basic R syntax and data types

The fastest way to get into R is to have a look at a simple example script.

```{r}
my_name <- "Jordan Sicherman"
my_languages <- c("English", "Russian", "R")

for (i in seq_along(my_languages)) {
  print(paste(my_name, "speaks", my_languages[i]))
}

print(paste(my_name, "speaks", length(my_languages), "languages"))
```

You'll notice a few things right off the start.

1.  You can assign values to names by using the **assignment operator**, `<-`
2.  You don't need to use semicolons to end lines
3.  You use the function `c` to create **column vectors**
4.  R uses curly braces to enclose expressions. White space doesn't matter
5.  You can subset vectors using square brackets (`[â€¦]`)

Some other things are less obvious...

1.  Although `my_name` is only one element, it's also technically a vector (of length 1)
2.  R is 1-indexed, **not** 0-indexed

We can crank this up a bit by introducing a few more data types and elements.

```{r}
# Create a data frame of data.
student_data <- data.frame(name = c("Jordan Sicherman", "John Doe", "Jane Doe"),
                           age = c(23, 31, 40),
                           favorite_language = c("R", "Python", "C++"),
                           knows_R = c(TRUE, FALSE, NA))

print(paste("The mean age of the class is", round(mean(student_data$age), digits = 2),
            "years"))

age_diff <- student_data$age[2] - student_data[1, "age"]
print(paste("Student 2 is", age_diff, "years older than student 1"))

knitr::kable(student_data)
```

We'll talk at length about these data types as they will form the foundation of our future work. There are a few questions worth addressing at this point:

1.  How do we write comments in R code?
2.  What is a function? How do we call a function in R and pass the parameters we need?
3.  What does the `$` do in R?
4.  What about `::`?
5.  How do I know what functions I need and how to use them?
6.  What can go wrong and how can I deal with it?

For these last questions, consider a scenario in which we want to sample `10` numbers at random from a normal with a mean of `100` and standard deviation of `5` (ie. $N(\mu = 100, \sigma^2 = 5)$). We can try using `rnorm` to do this.

```{r, error=TRUE}
observations <- rnorm()
```

Alas, we run into an error when we try to run the code. R spits a scary looking error back to us. But what's `n`? How do we specify it? If you're ever in this position, R makes it easy to refer to the help documentation by simply putting a question mark before the name of the function we're confused about, like so:

```{r eval=FALSE}
?rnorm
```

From this, we can quickly read off the correct parameters and what each one means, allowing us to fix our previous attempt...

```{r}
observations <- rnorm(10, mean = 100, sd = 5)
```

### Cheat sheet of data types

Now that you've seen some of these in action, let's formalize this a bit. R has the following standard types.

**logicals**: `TRUE` and `FALSE` (can also be abbreviated as `T` and `F` and are interpreted as `1` or `0` in math contexts).

**characters**: text or strings. Should be surrounded in double quotes (`"`) but can also be by single quotes (`'`).

**factors**: a representation of a vector of characters, encoded as integral codes.

**numerics**: R automatically converts between `integers` and `doubles`. You don't have to worry about the difference too much.

**missing data**: R provides `NA` to stand in for data that is missing. This is different than `NULL`, which means that the value is undefined (not missing, although it may also technically be missing).

**vectors**: which again come in two "flavors": *homogeneous* (which include `atomic vectors`, `matrices` and `arrays`) and *heterogeneous* (`lists` and `data.frames`)

**closures and environments**: we'll get to these later

You should get comfortable with identifying and working with the following:

1.  Integers and doubles
2.  Characters
3.  Factors
4.  Logicals
5.  Data frames
6.  Calling functions

# Exercises

Identify the following standard data types by replacing `YOUR_ANSWER_HERE` with a length 1 character vector with the name of the correct data type.

```{r eval=FALSE}
# 31.05
ex1_A <- YOUR_ANSWER_HERE

# TRUE
ex1_B <- YOUR_ANSWER_HERE

# c(1, 3, 5, 7, 9)
ex1_C <- YOUR_ANSWER_HERE

# c(100, 31/50, "100%")
ex1_D <- YOUR_ANSWER_HERE

# data.frame(A = c("A", "B", "C"), B = c(TRUE, FALSE, FALSE))$B
ex1_E <- YOUR_ANSWER_HERE
```

Convert the following pseudo-code into valid R code

```{r eval=FALSE}
well_rounded_meal := [slice_of_pizza, taco, orange, apple, coffee]
list_of_calories := [392, 304, 71, 91, 1.8]

total_consumed_calories := sum of list_of_calories
total_foodstuffs_consumed := length of well_rounded_meal

print You consumed {total_foodstuffs_consumed} things for a total of {total_consumed_calories}
```
